<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.hk.notice">

	<select id="ngetAlllist" resultType="NoticeDto">
	 	SELECT N_SEQ, N_TITLE, N_REGDATE
	 	FROM NOTICE ORDER BY SYSDATE DESC
	</select>
	
	<insert id="ninsertboard" parameterType="NoticeDto">
		INSERT INTO NOTICE (N_SEQ, M_SEQ, N_TITLE, N_CONTS, N_REGDATE, N_COUNT)
		VALUES
		(NOTICE_SEQ.NEXTVAL,#{m_seq},#{n_title},#{n_conts},SYSDATE,0)
	</insert>
	
	<select id="ngetboard" parameterType="int" resultType="NoticeDto" >
		SELECT N_SEQ, M_SEQ, N_TITLE, N_CONTS, N_REGDATE, N_COUNT
		FROM NOTICE WHERE N_SEQ=#{n_seq}
	</select>
	
	<update id="nupdateboard" parameterType="int" >
		UPDATE NOTICE SET TITLE=#{title}, N_CONTS=#{conts}, REGDATE=SYSDATE
		WHERE Q_SEQ=#{seq}
	</update>
	
	<delete id="ndelboard" parameterType="int">
		DELETE FROM NOTICE WHERE Q_SEQ=#{q_seq}
	</delete>
	
	<select id="qgetAlllist" resultType="QaDto">
		SELECT q.q_seq , m.m_name, q.q_title , q.q_regdate
		FROM QA q, MEMBERS m WHERE q.m_seq=m.m_seq ORDER BY SYSDATE DESC
	</select>
	
	<insert id="qinsertboard" parameterType="QaDto">
		INSERT INTO QA (Q_SEQ, M_SEQ, Q_TITLE, Q_CONTS, Q_REGDATE, Q_FLAG)
		VALUES
		(QA_SEQ.NEXTVAL,#{m_seq},#{q_title},#{q_conts},SYSDATE,0)		
	</insert>
	
	<select id="qgetboard" parameterType="int" resultType="QaDto">
		SELECT q.q_seq , m.m_name, q.q_title , q.q_regdate,q.q_conts
		FROM QA q, MEMBERS m WHERE Q_SEQ=#{q_seq} AND q.m_seq=m.m_seq
	</select>
	
	<update id="qupdateboard" parameterType="QaDto">
		UPDATE QA SET TITLE=#{q_title}, Q_CONTS=#{q_conts}, REGDATE=SYSDATE
		WHERE Q_SEQ=#{q_seq}
	</update>
	
	<delete id="qdelboard" parameterType="int">
		DELETE FROM QA WHERE Q_SEQ=#{seq}
	</delete>
	
	
	

</mapper>